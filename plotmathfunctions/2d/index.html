<!DOCTYPE html>
<html>
  <head>
    <script src="../../navigation/menu.js"></script>
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
    <script src="../../math-library/math-complexnumbers.js"></script>
    <script src="../../math-library/graphicfunctions.js"></script>
    <script src="../../fractals/fractals-library/controls.js"></script>
    <script src="../../fractals/fractals-data/twod.data.js"></script>
  </head>
  <body onload="init();">
    <table border="0">
      <tr>
        <td valign="top">
              <div id="menu"></div>
              <hr>
              <div id="content"></div>
              <hr>
              <div id="dynamicSliders">placeholder</div>
              <hr>
              <b>Coordinates</b><div id="mousecoordinates"></div>
        </td>
        <td valign="top">
          <canvas
            id="myCanvas"
            width="1100"
            height="700"
            style="border: 1px solid;"
          ></canvas>
        </td>
      </tr>
    </table>

<script>
"use strict";

//global variables here
      //--- global PARAMETERS ------------------------------------------------------------------
      const myCanvas = document.getElementById("myCanvas");
      const ctx = myCanvas.getContext("2d");
      const cW = myCanvas.clientWidth;
      const cH = myCanvas.clientHeight

      //--- parameters the user can change via sliders if made visible
      // -- global variables
      var x0 = params.x0.val;
      var x1 = params.x1.val;
      var y0 = params.y0.val;
      var y1 = params.y1.val;
      const fixedOrigin = params.fixedOrigin.val;

      const xIntervals=250;

      //wip
      const iGrid=20;
      const drawGrid=true;

      var reMap = new ReMap(cW, cH, x0, x1, y0, y1, fixedOrigin); //functions to map real value to canvas coordinates

      reMap.objCanvas = ctx;

      //--- calculated params
      var dx = reMap.dx();
      var dy = reMap.dy();



//---------------------------------------
function init(){

  genNavigation("twoD");
  generateControls();
  fileToParameters(); //initiate event listener for file uploader
  reMap.drawAxis();
  plotAll();

}
//---------------------------------------
function loadvaluesandgo() {
        x0 = params.x0.val;
        x1 = params.x1.val;
        y0 = params.y0.val;
        y1 = params.y1.val;
        reMap.x0 = x0;
        reMap.x1 = x1;
        reMap.y0 = y0;
        reMap.y1 = y1;
        reMap.clearcanvas();
        plotAll();
        reMap.drawAxis();
      }
//---------------------------------------

function plotAll(){
  plotFunction(f,"#121212");
  //plotFunction(g,"#AA0000");
  //plotFunction(h,"#BB0000");

}




function f(x) {
  return 1/x; //Math.sin(x);  
};
function g(x) {
  return .5*Math.sin(2*x);  
};
function h(x) {
  return .33*Math.sin(3*x);   
};









//-------------------------------------------
function plotFunction(objF,strColor) {

  ctx.beginPath();
  ctx.strokeStyle = strColor; //"#FF0000";
  ctx.strokeStyle = "#D3D3D3";
  ctx.lineWidth = 0.5;

  var xi=x0;
  var yi=objF(x0);
  ctx.moveTo(reMap.x(xi),reMap.y(yi)); //first point on the map
  
  do {
    
    //calculate next point
    var xii=xi+dx;
    var yii=objF(xii);
    ctx.lineTo(reMap.x(xii),reMap.y(yii));
    ctx.stroke();  
    xi=xii;
    yi=yii;
    ctx.moveTo(reMap.x(xi),reMap.y(yi)); //move to next point
  } while (xii < x1);



  
}
//-------------------------------------------


</script> 

</body>
</html>
