<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../../css/main.css">
    <script src="../../navigation/menu.js"></script>
    <script src="../fractals-library/controls.js"></script>
    <script src="../fractals-data/tree.data.js"></script>
    <script src="fractals.tree.functions.js"></script>
      </head>
<body onload="init();">
<table border="0">
  <tr>
    <td><canvas id="myCanvas" width="1000" height="700" style="border:1px solid"></canvas></td>
    <td valign="top">
      <div id="dynamicSliders"></div>
      <div id="menu" ></div>
    </td>
  </tr>  
</table>

<script>
//--- global PARAMETERS ------------------------------------------------------------------  
const c = document.getElementById("myCanvas");
const ctx = c.getContext("2d"); 
const cW=c.clientWidth;
const cH=c.clientHeight;
const pi=Math.PI;



//--- defined to be global, actual values taken from the ext. file data.js
var initAngle=0;       
var dAngle=0;          
var initLen=0;         
var minLen=0;          
var reduction=0;       
var initTrunk=0;       
var trunkReduction=0;   
var minBranch=0;       
//----------------------------------------------------------------------------------------
//-------------------- INIT---------------------------
function init(){

    genNavigation(); //navigation menu

    ctx.shadowBlur = 5;
    ctx.shadowColor = "green";
    
    generateControls();
    fileToParameters(); //initiate event listener for file uploader
    loadvaluesandgo();
  }  
//-----------------------------------------------------------------------
function loadvaluesandgo() {

//go! button

// -- load parameters from params object
    initAngle=params["initAngle"].val;          
    dAngle=params["dAngle"].val;            
    initLen=params["initLen"].val;       
    minLen=params["minLen"].val;  
    reduction=params["reduction"].val;       
    initTrunk=params["initTrunk"].val;       
    trunkReduction=params["trunkReduction"].val;    
    minBranch=params["minBranch"].val;  

  //--- calculated params, if any

  //---clear canvas
  ctx.clearRect(0, 0, cW, cH);

  draw(0,0,initAngle,initLen,initTrunk);
}
//---------------------------------------------------






  //----------------------------------------------------
function reDraw() {  
  ctx.clearRect(0, 0, cW, cH);
  init();  
}
//--------------------------------------------------
function resetReload() {
  location.reload();  
}



</script> 
</body>
</html>
