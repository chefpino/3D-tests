<!DOCTYPE html>
<html>
<head>
  <script src="../mandelbrot/controls.js"></script>
  <script src="template.js"></script>
  <script>

  
  //INIT



  function init() {
    generateControls();
    fileToParameters(); //initiate event listener
    //console.log(parametersToJSON());
  }
  



    </script>
</head>

<body onload="init();">
<table border="1">
  <tr>
    <td><div id=dynamicSliders></div></td> 
    <td><button onclick="return download('json-text.txt',parametersToJSON());">SAVE</button></td>
    <td valign="top">
      <input type="file" name="inputfile" id="inputfile"> 
      <br> 
      <pre id="output">val will be here</pre> 
      <script type="text/javascript"> 

      function readJSONfile(tempReader) {
         //WIP
         //tempReader is an object, the .result method contains the file 
         
         var rTemp=0; //real number, value of parameter
         var tempJSONobj=JSON.parse(tempReader.result);
        
        for (var key in params) {
           
          rTemp=tempJSONobj[key];
          //assign values to params
           params[key].val=rTemp;
           
          //move sliders
          document.getElementById(key).value=paramToSlider(key,rTemp);

          //update box on the right of the slider, current value of parameter
          updateParam(key,rTemp);

        }
        /* for debug
        document.getElementById('output').textContent=strTemp; 
        */

      }



      /* 
      document.getElementById('inputfile').addEventListener('change', function() { 
        
      var fr=new FileReader(); 
      fr.onload=function(){ 
          //document.getElementById('output').textContent=fr.result; //for debug only
          //var foo=JSON.parse(fr.result);
          //console.log("count: " + foo.count);                      //for debug only
          readJSONfile(fr);
          }         
      fr.readAsText(this.files[0]); 
      })
      */ 
      </script> 





    </td>
  </tr>  
</table>





</body>

</html>