<!DOCTYPE html>
<html>

<body>
<table>
  <tr>
    <td><canvas id="myCanvas" width="500" height="500" style="border:1px solid"></canvas></td>
    <td>
        <div id="a"></div><br>
        <div id="b"></div><br>
        <div id="c"></div><br>
        <div id="d"></div><br>
    </td>
</tr>
</table>
<script>



const c = document.getElementById("myCanvas");
const cW=c.clientWidth;
const cH=c.clientHeight;
const ctx = c.getContext("2d"); 

const x0=-2;
const x1=2;
const y0=-2;
const y1=2;

//--------------
//graphic mapping paramenters (linear transformation of the given intervals to the canvas rect)
const ax=cW/(x1-x0);
const bx=-1*x0*ax;
const ay=cH/(y0-y1);
const by=-1*y1*ay;

function xMap(x){
  return ax*x+bx;
}
function yMap(y){
  return ay*y+by;
}

function plot(x,y) {
  ctx.beginPath();
  ctx.fillStyle = "#FF0000";
  ctx.fillRect(x,y,1,1);
}


//--- linear transformation for fun rectangle to parallelogram

//rect coordinates
function oParallelogram(v1x,v1y,v2x,v2y){   
  this.v1x=v1x;
  this.v1y=v1y;
  this.v2x=v2x;
  this.v2y=v2y;
  this.pDraw=function(){
    ctx.beginPath();
    ctx.strokeStyle = "#000000"; 
    ctx.moveTo(xMap(0),yMap(0));
    ctx.lineTo(xMap(v1x),yMap(v1y));
    ctx.lineTo(xMap(v1x+v2x),yMap(v1y+v2y));
    ctx.lineTo(xMap(v2x),yMap(v2y));
    ctx.lineTo(xMap(0),yMap(0));
    ctx.stroke();
  }
  this.pDrawVectors=function(){
    ctx.beginPath();
    ctx.strokeStyle = "#FF0000";
    ctx.moveTo(xMap(0),yMap(0));
    ctx.lineTo(xMap(v1x),yMap(v1y));
    ctx.stroke();
    ctx.moveTo(xMap(0),yMap(0));
    ctx.lineTo(xMap(v2x),yMap(v2y));
    ctx.stroke();

  }


}

  
function oRect(vx,vy) {
  
    this.vx=vx;
    this.vy=vy;     
    this.rDraw=function() {
      ctx.beginPath(); 
      ctx.strokeStyle = "#000000"; 
      ctx.moveTo(xMap(0),yMap(0));
      ctx.lineTo(xMap(vx),yMap(0));
      ctx.lineTo(xMap(vx),yMap(vy));
      ctx.lineTo(xMap(0),yMap(vy));
      ctx.lineTo(xMap(0),yMap(0));
      ctx.stroke(); 
    };  

    this.drawVector=function (){
      ctx.beginPath(); 
      ctx.strokeStyle = "#0000FF"; 
      ctx.moveTo(xMap(0),yMap(0));
      ctx.lineTo(xMap(vx),yMap(vy));
      ctx.stroke();
}



  
}
function tempMap(oR,oP,x,y) {

   //ax+by, cx+dy

  var a=oP.v2x/oR.vx;
  var b=oP.v1x/oR.vy;
  var c=oP.v2y/oR.vx;
  var d=oP.v1y/oR.vy;

  var oDiv = document.getElementById("a");
  oDiv.innerHTML="a=" + a;
  oDiv = document.getElementById("b");
  oDiv.innerHTML="b=" + b;
  oDiv = document.getElementById("c");
  oDiv.innerHTML="c=" + c;
  oDiv = document.getElementById("d");
  oDiv.innerHTML="d=" + d;
  var xTemp=a*x+b*y;
  var yTemp=c*x+d*y;

  return {    
    xt: xTemp+0,
    yt: yTemp+0
  };
}



//-------------------------------------------
function drawAxis() {  
  ctx.strokeStyle = "#D3D3D3"; 
  ctx.moveTo(xMap(x0),yMap(0));
  ctx.lineTo(xMap(x1),yMap(0));
  ctx.stroke();
  ctx.moveTo(xMap(0),yMap(y0));
  ctx.lineTo(xMap(0),yMap(y1));
  ctx.stroke();  
  ctx.font = "8px Arial";
  ctx.fillText("(0,0)", xMap(0), yMap(0));
};
//-------------------------------------------

drawAxis();

var R=new oRect(1,1);
R.drawVector();
var P=new oParallelogram(.1,.2,.3,.4);
P.pDrawVectors();
plot(xMap(1),yMap(1));

//plot(xMap(2),yMap(2));
//console.log("wtf");
//console.log("wtf="+tempMap(R,P,1,1).xt);


plot(xMap(tempMap(R,P,1,1).xt),yMap(tempMap(R,P,1,1).yt));
//plot(xMap(tempMap(R,P,2,2).xt),yMap(tempMap(R,P,2,2).yt));





</script> 

</body>
</html>